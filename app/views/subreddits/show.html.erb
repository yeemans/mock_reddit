<%= image_tag @banner, :id => "subreddit_banner" %>
<%= render "update_banner" if @subreddit.moderators.include?(current_user) %>

<div id="subreddit-pages">
  <h2 id="subreddit-title"> <%= @subreddit.title %> </h2>

  <%= button_to "Unjoin", unsubscribe_path, :id => "join_button" if @subscribed %>
  <%= button_to "Join", subscribe_path, :id => "join_button" unless @subscribed %>
</div>

<div class="columns is-multiline" id="subreddit-body">
  <div class="column is-three-fifths">
    <% @posts.each do |post| %>
        <div class="post-header">
          <%= link_to "Posted by u/#{post.user.username}", profile_path(post.user.username),
          :class => "post-username" %>
          <%= link_to post.title, post_path(post.id), :class => "post-link" %> 

          <div class="post-body">
            <%= link_to post.content, post_path(post.id) %>
          </div>
        </div>

    <% end %>
  </div>

  <div class="column is-one-quarter">

    <div id="description-header">
      <h3 id="about-community"> About Community </h3>
    </div>

    <div class="description-body">
      <p id="subreddit-description"> <%= @subreddit.description %> </p>
      <p> <%= number_to_human(@subreddit.subscribers.count) %> </p>
      <p> Members </p>
    </div>

    <div id="moderator-header">
      <h3> Moderators </h3>
    </div>

    <% @moderators.each do |mod| %>
      <%= link_to "u/#{mod.username}", profile_path(mod.username) %>
    <% end %>

  </div>

</div>

<% if @subreddit.moderators.include?(current_user) %>
  <%= javascript_pack_tag 'banner.js' %>
<% end %>